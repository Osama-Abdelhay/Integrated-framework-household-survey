---
title: "Configure forms"
---

```{r options_communes, include=FALSE}
source("options_communes.R")
```

<div class="important">
 

Configure forms can be done both through the Kobobuilder interface or within Excel.
The second options is preferred as it allows for more controls.

</div>

## XLSForm

The form needs to be defined using the xlsform format.
XLSForm is a form standard created to help simplify the authoring of forms in Excel. Authoring is done in a human readable format using a familiar tool that almost everyone knows - Excel. XLSForms provide a practical standard for sharing and collaborating on authoring forms. They are simple to get started with but allow for the authoring of complex forms by someone familiar with the syntax described below.

The XLSForm is then converted to an X-Form, a popular open form standard, that allows you to author a form with complex functionality like skip logic in a consistent way across a number of web and mobile data collection platforms.

The documentation on xlsform is [here](http://xlsform.org/). The same format is actually used by multiple data collection technological platform such as [kobotoolbox](http://www.kobotoolbox.org/)(the platform used by UNHCR on [http://kobo.unhcr.org](http://kobo.unhcr.org), [OpenDataKit](https://opendatakit.org/) or [ONA](https://ona.io).


## Some tips

### Variable Encoding

 * The "name" column must be within 32 characters, cannot begin with a number or any special character and cannot contain any spaces in between; otherwise ODK Validate will issue an error. 
 
 * Please use a short meaningull name for your variable rather than a code like Q1 or Q2. 
 
 * In order to anticipate the analysis with a statistical package, limite variable names to 12 characters and do not start a variable name with a number
 
### Questionnaire structure 

 * All "begin group" types must have a corresponding "end group". It is advised to name each of the begin group and end group "name" as well as "label" columns for easy identification of where a group starts and ends, e.g. "type– begingroup. Name – grp_agri_aman. Label – Aman Rice. T ype – end group. Name – endgrp_agri_aman. Label – no labels are required as this won't show up in the form. 
 
 * There can be a mother group with several child groups within, however each group essentially works like brackets which open, can remain open, close or close at the end. It can get rather complicated once several questions within a group are to be skipped. 

 * DO NOT LEAVE A SPACE AFTER your "type" or "name" variables, e.g. "end group ". It is an invisible error that will cause the form to malfunction. 

 * It is a good practice to keep naming the questions "label" as “Name of Household Head... Age of Respondent...Please specify what you mean by "Other"...and so on”. The same can be done for "name" variables but one must remember that they cannot start with an uppercase letter, e.g. “name_hhh” is allowed. 
 
### Get your form smart 

 * The "note" and "calculate" type of questions can be really handy and must be used whenever there is a reason to check back with data entered previously. E.g. "type – calculate, name – calc_loan, calculation - ${loan_1}+{loan_2}+{loan_3}" with "type – note, name – chk_total_loan , label – Your breakdown of total loans ${loan_1} and ${loan_2} and ${loan_3} add up to ${calc_loan}. Please make sure they are equal to the amount entered before as total loan ${totalloan}. 
 
 * Systematically add constraint to your numeric questions: age can not be negative or bigger than 120. Add also constraint on linked values: for instance if you know the number of children in a family, the number of boys can not be bigger than the total number of children.
 
 * When you do a calculation, __beware of zero__ : To convert empty values to zero, use either the coalesce() function or the if() function. See the form logic functions reference below.

 * The best types of constraint and relevance are usually the simplest. When typing the binding guidelines (http://opendatakit.org/help/form - design/binding/) can simplify the entire line of code. Also this is the most interesting and perhaps challenging part of writing questionnaires. Users are free to develop their own lines of code and put them to the test. For any help the Google ODK groups are more than sufficient. 
 
 * If the questions need to be translated into a local language, the input must be in __Unicode__. Also it is imperative to make sure that questions in the base language are translated with the meaning intact. Difference in interpretation can cause severe errors in the quality of the data. 
 
 
 * Systematically add the metadata field: type: 'start', 'end', 'today', 'deviceid', 'imei', 'phonenumber'
 
 * Record correctly registration case number using a constraint: for case number: __regex(.,'^[0-9]{3}-[0-9]{2}[C][0-9]{5}$')__ & for Individual number __regex(.,'^[0-9]{3}-[0-9]{2}[I][0-9]{5}$')__
 
 * Record case number using bar code scanner whenever possible - rather than manual data entry
 

### Keep your xlsform legible 

 * It is possible to separate different sections of the questionnaire using different cell colours. It does not make a difference for ODK, but makes the form much more navigable. 

 * In the choices sheet, a gap or (blank row) can be left after each set of answers. Again, it doe s not make a difference for ODK but makes it much easier for navigation. 

 * By the end of the coding sessions, there will be several versions of the MS Xls files. It is crucial to separate each according to versions and also to make sure the names do not in clude any spaces or begin with numbers or special characters. 


### Deploy the form

 * Note for field deployment: if possible, users must try and keep a copy/image of the entire " ODK " folder inside the memory of the tablet and save it elsewhere for later reference. If planning requires users to clear out " ODK " and re insert a questionnaire for easy tracking, then this step becomes very a vital safe guard


## Additional tips

Additional tutorials and tips can be found through the following links: 

 * [Open data kit Form Logic](https://docs.opendatakit.org/form-logic/)

 * [Open data kit Form design guides](https://opendatakit.org/help/form-design/) 

 * [Open data kit work around](https://opendatakit.org/help/form-design/workarounds/)  

 * [Other training guides](https://opendatakit.org/help/training-guides/)

 * [Advanced XLSForm coding tips #1](http://blog.cartong.org/2015/08/11/advanced-xls-forms-coding-1/)  

 * [Advanced XLSForm coding tips #2](http://blog.cartong.org/2015/08/21/advanced-xls-forms-coding-2/) 
 
 * [ACF XLSForm coding tips](https://odk.acf-e.org/odk/LinkedDocuments/Annex%204%20ODK%20ACF-E%20How%20to%20author%20surveys%20for%20ODK.pdf)
 

## Support Forum 

When faced with specific challenges, multiple online forums can be consulted (as xlsform is used on different platform): 

 * [Forum for Kobotoolbox](http://support.kobotoolbox.org/) 

 * [Forum for OpenDataKit](https://forum.opendatakit.org/)  


